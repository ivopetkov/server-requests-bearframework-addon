/*
 * Server requests addon for Bear Framework
 * https://github.com/ivopetkov/server-requests-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{};
ivoPetkov.bearFrameworkAddons.serverRequests=function(){var g=null,k=function(a,c,d,e){if(null===g)throw"ivoPetkov.bearFrameworkAddons.serverRequests not initialized";var b=new XMLHttpRequest;b.onreadystatechange=function(){if(4===b.readyState){if(200===b.status){try{var a=JSON.parse(b.responseText)}catch(l){a={}}if("undefined"!==typeof a.status&&"1"===a.status){"undefined"!==typeof d&&d(a.text);return}}"undefined"!==typeof e&&e()}};var f=[],h;for(h in c)f.push(h+"="+encodeURIComponent(c[h]));f=f.join("&");
b.open("POST",g+"?n="+a,!0);b.setRequestHeader("Content-type","application/x-www-form-urlencoded");b.send(f)};return{initialize:function(a){"undefined"!==typeof a.url&&(g=a.url)},send:function(a,c,d,e){k(a,c,d,e)}}}();