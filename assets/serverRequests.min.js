/*
 * Server requests addon for Bear Framework
 * https://github.com/ivopetkov/server-requests-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.serverRequests=ivoPetkov.bearFrameworkAddons.serverRequests||function(){var e=null,n=function(n,o,t,r){if(null===e)throw new Error("ivoPetkov.bearFrameworkAddons.serverRequests not initialized");var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){if(200===i.status){try{var e=JSON.parse(i.responseText)}catch(n){e={}}if(void 0!==e.status&&"1"===e.status)return void(void 0!==t&&t(e.text))}void 0!==r&&r()}};var s=[];for(var a in o)s.push(a+"="+encodeURIComponent(o[a]));s=s.join("&"),i.open("POST",e+"?n="+n,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(s)};return{initialize:function(n){void 0!==n[0]&&(e=n[0])},send:function(e,o){return void 0===o&&(o={}),Promise=window.Promise||function(e){var n=[],o=null;this.then=function(e){return n.push(e),this},this.catch=function(e){return null===o&&(o=e),this};var t=function(){for(var e in n)n[e].apply(null,arguments)},r=function(){null!==o&&o.apply(null,arguments)};window.setTimeout((function(){e(t,r)}),16)},new Promise((function(t,r){n(e,o,t,r)}))}}}();