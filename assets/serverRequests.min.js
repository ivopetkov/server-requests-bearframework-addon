/*
 * Server requests addon for Bear Framework
 * https://github.com/ivopetkov/server-requests-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{};
ivoPetkov.bearFrameworkAddons.serverRequests=ivoPetkov.bearFrameworkAddons.serverRequests||function(){var k=null,l=function(b,c,f,d){if(null===k)throw"ivoPetkov.bearFrameworkAddons.serverRequests not initialized";var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState){if(200===a.status){try{var g=JSON.parse(a.responseText)}catch(m){g={}}if("undefined"!==typeof g.status&&"1"===g.status){"undefined"!==typeof f&&f(g.text);return}}"undefined"!==typeof d&&d()}};var h=[],e;for(e in c)h.push(e+
"="+encodeURIComponent(c[e]));h=h.join("&");a.open("POST",k+"?n="+b,!0);a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(h)};return{initialize:function(b){"undefined"!==typeof b[0]&&(k=b[0])},send:function(b,c){"undefined"===typeof c&&(c={});Promise=window.Promise||function(b){var d=[],a=null;this.then=function(a){d.push(a);return this};this["catch"]=function(b){null===a&&(a=b);return this};var c=function(){for(var a in d)d[a].apply(null,arguments)},e=function(){null!==
a&&a.apply(null,arguments)};window.setTimeout(function(){b(c,e)},16)};return new Promise(function(f,d){l(b,c,f,d)})}}}();